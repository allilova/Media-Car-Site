<div class="create-container">
  
  <div class="form-card">
    
    <div class="card-header">
      <h2>Добавяне на нов продукт</h2>
      <a routerLink="/admin/dashboard" class="back-link">
        <i class="fa-solid fa-xmark"></i> Отказ
      </a>
    </div>

    <form (ngSubmit)="onSubmit()">
      
      <div class="section-title">Основна информация</div>
      
      <div class="form-row">
        <div class="form-group full-width">
          <label>Име на продукта</label>
          <input type="text" [(ngModel)]="product.title" name="title" placeholder="напр. Volkswagen Passat B6 Android 13" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Категория</label>
          <select [(ngModel)]="product.category" name="category">
            <option value="multimedia">Мултимедии</option>
            <option value="accessories">Аксесоари</option>
            <option value="services">Услуги</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Базова Цена (лв)</label>
          <input type="number" [(ngModel)]="product.price" name="price" placeholder="270" required>
        </div>

        <div class="form-group">
          <label>Стара Цена (Опция)</label>
          <input type="number" [(ngModel)]="product.oldPrice" name="oldPrice" placeholder="350">
        </div>
      </div>

      <div class="section-title">Снимки</div>
      <div class="image-upload-area">
        <div class="upload-placeholder">
          <i class="fa-solid fa-cloud-arrow-up"></i>
          <p>Плъзнете снимки тук или кликнете за избор</p>
          <input type="file" multiple (change)="onFileSelected($event)" class="file-input">
        </div>
        
        <div class="preview-gallery">
          @for (img of previewImages; track $index) {
            <div class="img-preview">
              <img [src]="img" alt="Preview">
              <button type="button" class="remove-img" (click)="removeImage($index)">✕</button>
            </div>
          }
        </div>
      </div>

      <div class="section-title">
        <span>Варианти (RAM/ROM)</span>
        <button type="button" class="add-variant-btn" (click)="addVariant()">+ Добави вариант</button>
      </div>

      <div class="variants-list">
        @for (variant of product.variants; track $index) {
          <div class="variant-row">
            <div class="v-group">
              <label>RAM (GB)</label>
              <input type="number" [(ngModel)]="variant.ram" [name]="'ram'+$index" placeholder="2">
            </div>
            <div class="v-group">
              <label>ROM (GB)</label>
              <input type="number" [(ngModel)]="variant.rom" [name]="'rom'+$index" placeholder="32">
            </div>
            <div class="v-group">
              <label>Цена (лв)</label>
              <input type="number" [(ngModel)]="variant.price" [name]="'vprice'+$index" placeholder="270">
            </div>
            <button type="button" class="delete-variant" (click)="removeVariant($index)">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        }
      </div>

      <div class="section-title">Описание</div>
      <div class="form-group">
        <textarea [(ngModel)]="product.description" name="description" rows="5" placeholder="Въведете подробно описание на продукта..."></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="submit-btn">СЪЗДАЙ ПРОДУКТ</button>
      </div>

    </form>
  </div>
</div>
