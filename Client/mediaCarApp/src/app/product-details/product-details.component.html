<div class="product-page-container" *ngIf="product.title"> <div class="product-main-section">
    <div class="product-gallery">
      <div class="main-image">
        <img [src]="selectedImage || 'assets/placeholder.png'" alt="Мултимедия">
      </div>
      <div class="thumbnail-list">
        @for (img of product.images; track img) {
          <img [src]="img" (click)="selectedImage = img" [class.active]="selectedImage === img" class="thumb">
        }
      </div>
    </div>

    <div class="product-info">
      <h1 class="product-title">{{ product.title }}</h1>
      
      <div class="product-price">
        <span class="current-price">{{ selectedVariant.price }} лв.</span>
        @if (selectedVariant.oldPrice) {
          <span class="old-price">{{ selectedVariant.oldPrice }} лв.</span>
        }
      </div>

      <div class="variant-selector">
        <label>Избери характеристики:</label>
        <select (change)="onVariantChange($event)" class="variant-select">
          @for (variant of product.variants; track variant._id) {
            <option [value]="variant._id">
              {{ variant.ram }}GB RAM / {{ variant.rom }}GB ROM - {{ variant.cpu }}
            </option>
          }
        </select>
      </div>

      <div class="action-buttons">
         <button class="add-to-cart-btn">Добави в количката</button>
      </div>
     <ul class="benefits-list">
        <li>
          <i class="fa-solid fa-truck-fast"></i>
          <span><strong>Бърза доставка</strong> на следващия работен ден</span>
        </li>
        <li>
          <i class="fa-solid fa-shield-halved"></i>
          <span><strong>2 Години гаранция</strong> и 14 дни право на връщане</span>
        </li>
        <li>
          <i class="fa-solid fa-screwdriver-wrench"></i>
          <span><strong>Осигурен сервиз</strong> и поддръжка</span>
        </li>
        <li>
          <i class="fa-solid fa-phone"></i>
          <span><strong>Консултация</strong> по телефона за монтаж</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="product-tabs">
     <div class="tabs-header">
      <button 
        [class.active]="activeTab === 'desc'" 
        (click)="activeTab = 'desc'">Описание</button>
      <button 
        [class.active]="activeTab === 'specs'" 
        (click)="activeTab = 'specs'">Спецификации</button>
      <button 
        [class.active]="activeTab === 'delivery'" 
        (click)="activeTab = 'delivery'">Доставка</button>
    </div>

    <div class="tab-content">
      
      @if (activeTab === 'desc') {
        <div class="tab-pane fade-in">
          <h3>Описание</h3>
          <p style="white-space: pre-line">{{ product.description }}</p>
        </div>
      }

      @if (activeTab === 'specs') {
        <div class="tab-pane fade-in">
          <table class="specs-table">
            <tr>
              <td>Операционна система</td>
              <td>{{ product.specs?.os }}</td>
            </tr>
            <tr>
              <td>Дисплей</td>
              <td>{{ product.specs?.screen }}</td>
            </tr>
            <tr>
              <td>Резолюция</td>
              <td>{{ product.specs?.resolution }}</td>
            </tr>
            <tr>
              <td>Процесор</td>
              <td>{{ selectedVariant.cpu }}</td> </tr>
            <tr>
              <td>Памет (RAM/ROM)</td>
              <td>{{ selectedVariant.ram }}GB / {{ selectedVariant.rom }}GB</td>
            </tr>
            <tr>
              <td>Изходна мощност</td>
              <td>{{ product.specs?.power }}</td>
            </tr>
          </table>
        </div>
      }
      
      </div>
  </div>
</div>